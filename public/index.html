<!DOCTYPE html>
<html lang="en">
<head>
  <title>chatroom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<!-- ══ AUTH ══ -->
<div id="auth-screen">
  <div class="auth-titlebar">
    <span>chatroom</span>
    <span class="auth-version">v2.0</span>
  </div>
  <div class="auth-disclaimer">a small project by mce.</div>
  <div class="auth-tabs">
    <button class="auth-tab active" onclick="sfxClick();switchTab('login')">Login</button>
    <button class="auth-tab" onclick="sfxClick();switchTab('register')">Register</button>
  </div>
  <div class="auth-body">
    <div id="login-panel" class="auth-panel active">
      <p>Sign in to your account:</p>
      <input id="login-username" type="text" placeholder="Username..." maxlength="20" autocomplete="username" />
      <input id="login-password" type="password" placeholder="Password..." autocomplete="current-password" />
      <button class="primary" onclick="sfxClick();doLogin()">Login</button>
      <div class="auth-error" id="login-error"></div>
    </div>
    <div id="register-panel" class="auth-panel">
      <p>Create a new account:</p>
      <input id="reg-username" type="text" placeholder="Username (3-20 chars)..." maxlength="20" autocomplete="username" />
      <input id="reg-password" type="password" placeholder="Password (min 6 chars)..." autocomplete="new-password" />
      <input id="reg-password2" type="password" placeholder="Confirm password..." autocomplete="new-password" />
      <button class="primary" onclick="sfxClick();doRegister()">Create Account</button>
      <div class="auth-error" id="register-error"></div>
    </div>
    <div class="auth-user-count" id="auth-user-count"></div>
  </div>
</div>

<!-- ══ CHAT ══ -->
<div id="chat-screen">
  <div id="titlebar">
    <span id="titlebar-title">chatroom</span>
    <div id="titlebar-right">
      <span id="logged-in-as"></span>
      <!-- coin-display kept in DOM for JS compat but hidden via CSS -->
      <span id="coin-display">
        <img class="sprite" src="/sprites/coinIcon.png" width="16" height="16" alt="coins" onerror="this.src='/sprites/placeholder.png'">
        <span id="coin-amount">0</span>
      </span>
      <button class="icon-btn" onclick="sfxClick();openShop()" title="Shop">
        <img class="pixel-icon" src="/sprites/shopButtonIcon.png" alt="Shop" onerror="this.src='/sprites/placeholder.png'">
      </button>
      <button class="icon-btn" onclick="sfxClick();openGames()" title="Games">
        <img class="pixel-icon" src="/sprites/gameButtonIcon.png" alt="Games" onerror="this.src='/sprites/placeholder.png'">
      </button>
      <button id="user-count-btn" class="icon-btn" onclick="sfxClick();toggleUsers()" title="Online users">
        <img class="pixel-icon" src="/sprites/onlineUsersButtonIcon.png" alt="Users" onerror="this.src='/sprites/placeholder.png'">
        <span id="user-count-text">0</span>
      </button>
      <button class="icon-btn" onclick="sfxClick();openSettings()" title="Settings">
        <img class="pixel-icon" src="/sprites/settingsButtonIcon.png" alt="Settings" onerror="this.src='/sprites/placeholder.png'">
      </button>
      <button class="icon-btn danger" onclick="sfxClick();doLogout()" title="Exit">
        <img class="pixel-icon" src="/sprites/closeIcon.png" alt="Exit" onerror="this.style.display='none';this.parentNode.appendChild(document.createTextNode('✕'))">
      </button>
    </div>
  </div>

  <div id="reconnect-banner">
    <img class="sprite" src="/sprites/warningIcon.png" width="14" height="14" alt="!" onerror="this.src='/sprites/placeholder.png'">
    Connection lost &mdash; reconnecting...
  </div>

  <div id="chat-layout">
    <div id="rooms-sidebar">
      <h3>ROOMS</h3>
      <div id="rooms-list"></div>
    </div>
    <div id="main-area">
      <div id="users-panel"></div>
      <ul id="messages"></ul>
      <div id="typing-bar"></div>
      <div id="bottom">
        <input id="input" placeholder="Message, '/help' for commands" autocomplete="off" />
        <button id="send-btn" onclick="sfxClick();send()">Send</button>
      </div>
    </div>
  </div>
</div>

<!-- ══ FLOATING WINDOWS ══ -->

<!-- KEYPAD -->
<div id="keypad-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span><img class="sprite" src="/sprites/lockIcon.png" width="16" height="16" alt="" onerror="this.src='/sprites/placeholder.png'"> Enter Room Code</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('keypad-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeKeypad()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body">
      <div class="keypad-room-name" id="keypad-room-label"></div>
      <div class="keypad-dots" id="keypad-dots"></div>
      <div class="keypad-grid">
        <button class="keypad-btn" onclick="keypadPress('1')">1</button>
        <button class="keypad-btn" onclick="keypadPress('2')">2</button>
        <button class="keypad-btn" onclick="keypadPress('3')">3</button>
        <button class="keypad-btn" onclick="keypadPress('4')">4</button>
        <button class="keypad-btn" onclick="keypadPress('5')">5</button>
        <button class="keypad-btn" onclick="keypadPress('6')">6</button>
        <button class="keypad-btn" onclick="keypadPress('7')">7</button>
        <button class="keypad-btn" onclick="keypadPress('8')">8</button>
        <button class="keypad-btn" onclick="keypadPress('9')">9</button>
      </div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:6px;">
        <button class="keypad-btn keypad-clear" onclick="sfxClick();keypadClear()">&#x232B;</button>
        <button class="keypad-btn" onclick="keypadPress('0')">0</button>
        <button class="keypad-btn keypad-enter" onclick="sfxClick();keypadSubmit()">&#x21B5;</button>
      </div>
      <div class="keypad-error" id="keypad-error"></div>
    </div>
  </div>
</div>

<!-- ROOM CREATED -->
<div id="room-created-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span><img class="sprite" src="/sprites/lockIcon.png" width="16" height="16" alt="" onerror="this.src='/sprites/placeholder.png'"> Room Created</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('room-created-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeRoomCreated()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body" style="text-align:center;">
      <div style="font-size:17px;margin-bottom:4px;">Room <strong id="rc-room-name"></strong> is ready!</div>
      <div class="room-code-label">Share this code with anyone you want to join:</div>
      <div class="room-code-display" id="rc-room-code"></div>
      <div class="room-code-note">The code also appears under the room name in your sidebar.</div>
      <button class="settings-btn" style="margin-top:14px;width:100%" onclick="sfxClick();closeRoomCreated()">Got it</button>
    </div>
  </div>
</div>

<!-- CHANGEPASS -->
<div id="changepass-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span><img class="sprite" src="/sprites/warningIcon.png" width="16" height="16" alt="" onerror="this.src='/sprites/placeholder.png'"> Confirm Code Change</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('changepass-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeChangepass()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body">
      <div class="changepass-warning">This will kick ALL current members from the room. They will need the new code to re-join.</div>
      <div style="font-size:14px;color:var(--text-system);margin-bottom:4px;">New code for <strong id="cp-room-name"></strong>:</div>
      <div class="changepass-new-code" id="cp-new-code"></div>
      <div class="changepass-row">
        <button class="changepass-confirm-btn" onclick="sfxClick();confirmChangepass()">Confirm</button>
        <button class="changepass-cancel-btn" onclick="sfxClick();closeChangepass()">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- DAILY REWARD -->
<div id="daily-modal" class="modal-overlay">
  <div class="modal-box" style="text-align:center;">
    <div class="modal-titlebar">
      <span>Daily Reward</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('daily-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeDailyModal()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body">
      <img class="daily-icon" src="/sprites/coinIcon.png" alt="Coin" onerror="this.src='/sprites/placeholder.png'">
      <div class="daily-title">Daily Bonus Available!</div>
      <div style="font-size:15px;color:var(--text-system);margin-bottom:4px;">Claim your free coins for today</div>
      <div class="daily-amount">
        <img class="sprite" src="/sprites/coinIcon.png" width="32" height="32" alt="coin" onerror="this.src='/sprites/placeholder.png'">
        +50 coins
      </div>
      <button class="daily-claim-btn" onclick="sfxClick();claimDaily()">Claim Reward</button>
    </div>
  </div>
</div>

<!-- PROFILE (other users) -->
<div id="profile-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span id="profile-modal-title">Profile</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('profile-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeProfile()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body" id="profile-modal-body">Loading...</div>
  </div>
</div>

<!-- SELF PROFILE (discovered by clicking own name in user list) -->
<div id="self-profile-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span id="self-profile-title">&#x2014;</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('self-profile-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeSelfProfile()">&#x2715;</button>
      </div>
    </div>
    <div class="self-profile-body" id="self-profile-body"></div>
  </div>
</div>

<!-- SETTINGS (3 tabs: Look / You / Account) -->
<div id="settings-overlay" class="modal-overlay">
  <div class="modal-box" id="settings-modal">
    <div class="modal-titlebar">
      <span>Settings</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('settings-overlay')">_</button>
        <button class="modal-close" onclick="sfxClick();closeSettings()">&#x2715;</button>
      </div>
    </div>
    <div class="win-body">
      <div class="win-scroll" style="padding:16px;">
        <div class="stab-bar">
          <button class="stab active" onclick="sfxClick();switchSettingsTab('look')">Look</button>
          <button class="stab" onclick="sfxClick();switchSettingsTab('you')">You</button>
          <button class="stab" onclick="sfxClick();switchSettingsTab('account')">Account</button>
        </div>

        <!-- LOOK TAB -->
        <div id="stab-look" class="stab-panel active">
          <div class="settings-section">
            <span class="settings-label">Sound Effects</span>
            <button id="sound-toggle-btn" class="icon-btn on" onclick="sfxClick();toggleSound()" title="Toggle SFX">Sound On</button>
          </div>
          <div class="settings-section">
            <span class="settings-label">Theme</span>
            <div class="settings-note">Only owned themes shown. Buy more in the Shop.</div>
            <div class="theme-options" id="settings-theme-options"></div>
          </div>
          <div class="settings-section">
            <span class="settings-label">Username Colour</span>
            <div class="settings-note">Only owned colours shown.</div>
            <div id="settings-color-swatches"></div>
          </div>
          <div class="settings-save-row">
            <button class="settings-btn" onclick="sfxClick();saveSettings()">Save</button>
          </div>
          <div class="settings-status" id="settings-status"></div>
        </div>

        <!-- YOU TAB (stats + badges + coin balance) -->
        <div id="stab-you" class="stab-panel">
          <div id="stats-content">
            <div style="text-align:center;padding:20px;color:var(--text-system);">Loading...</div>
          </div>
          <div style="margin-top:12px;">
            <div class="badge-set-note">Click an earned badge to set as active.</div>
            <div class="badge-grid" id="badge-grid"></div>
            <div class="settings-status" id="badge-status"></div>
          </div>
        </div>

        <!-- ACCOUNT TAB -->
        <div id="stab-account" class="stab-panel" style="padding:6px 0 0;">
          <div class="settings-section">
            <span class="settings-label">Change Password</span>
            <div class="settings-note">Provide your current password, then choose a new one.</div>
            <input id="pw-old" type="password" placeholder="Current password" style="width:100%;margin:8px 0;padding:6px;font-family:'VT323',monospace;font-size:16px;border:2px inset var(--border-inset);background:var(--auth-input-bg);color:var(--text-main);" />
            <input id="pw-new" type="password" placeholder="New password (min 6 chars)" style="width:100%;margin:8px 0;padding:6px;font-family:'VT323',monospace;font-size:16px;border:2px inset var(--border-inset);background:var(--auth-input-bg);color:var(--text-main);" />
            <input id="pw-new2" type="password" placeholder="Confirm new password" style="width:100%;margin:8px 0;padding:6px;font-family:'VT323',monospace;font-size:16px;border:2px inset var(--border-inset);background:var(--auth-input-bg);color:var(--text-main);" />
            <div class="settings-save-row">
              <button class="settings-btn" onclick="sfxClick();changePassword()">Change Password</button>
            </div>
            <div class="settings-status" id="pw-status"></div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- SHOP -->
<div id="shop-overlay" class="modal-overlay">
  <div class="modal-box" id="shop-modal">
    <div class="modal-titlebar">
      <span><img class="sprite" src="/sprites/shopButtonIcon.png" width="18" height="18" alt="" onerror="this.src='/sprites/placeholder.png'"> Shop</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('shop-overlay')">_</button>
        <button class="modal-close" onclick="sfxClick();closeShop()">&#x2715;</button>
      </div>
    </div>
    <div class="win-body">
      <div style="padding:0 16px;">
        <div class="shop-balance" id="shop-balance">
          <img class="sprite" src="/sprites/coinIcon.png" width="16" height="16" alt="coin" onerror="this.src='/sprites/placeholder.png'">
          <span id="shop-balance-amt">0</span>
        </div>
        <div class="shop-tabs">
          <button class="shop-tab active" onclick="sfxClick();switchShopTab('themes')">Themes</button>
          <button class="shop-tab" onclick="sfxClick();switchShopTab('colors')">Username Colours</button>
        </div>
      </div>
      <div class="win-scroll" style="padding:0 16px 8px;">
        <div id="shop-themes" class="shop-panel active"></div>
        <div id="shop-colors" class="shop-panel"></div>
      </div>
      <div style="padding:0 16px 12px;flex-shrink:0;">
        <div class="shop-status" id="shop-status"></div>
      </div>
    </div>
  </div>
</div>

<!-- GAMES -->
<div id="games-overlay" class="modal-overlay">
  <div class="modal-box" id="games-modal">
    <div class="modal-titlebar">
      <span><img class="sprite" src="/sprites/gameButtonIcon.png" width="16" height="16" alt="" onerror="this.src='/sprites/placeholder.png'"> Games</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('games-overlay')">_</button>
        <button class="modal-close" onclick="sfxClick();closeGames()">&#x2715;</button>
      </div>
    </div>
    <div class="win-body">
      <div style="padding:0 16px;flex-shrink:0;">
        <div class="games-tabs">
          <button class="games-tab active" onclick="sfxClick();switchGame('slots')">
            <img class="sprite" src="/sprites/slotsIcon.png" width="13" height="13" alt="" onerror="this.src='/sprites/placeholder.png'"> Slots
          </button>
          <button class="games-tab" onclick="sfxClick();switchGame('dice')">
            <img class="sprite" src="/sprites/diceIcon.png" width="13" height="13" alt="" onerror="this.src='/sprites/placeholder.png'"> Dice
          </button>
          <button class="games-tab" onclick="sfxClick();switchGame('roulette')">
            <img class="sprite" src="/sprites/rouletteIcon.png" width="13" height="13" alt="" onerror="this.src='/sprites/placeholder.png'"> Roulette
          </button>
          <button class="games-tab" onclick="sfxClick();switchGame('leaderboard')">
            <img class="sprite" src="/sprites/trophyIcon.png" width="13" height="13" alt="" onerror="this.src='/sprites/placeholder.png'"> Board
          </button>
        </div>
      </div>
      <div class="win-scroll" style="padding:0 16px 16px;">
        <!-- SLOTS -->
        <div id="game-slots" class="game-panel active">
          <div class="game-balance" id="slots-balance">
            <img class="sprite" src="/sprites/coinIcon.png" width="18" height="18" alt="coin" onerror="this.src='/sprites/placeholder.png'">
            Balance: <span id="slots-balance-amt">0</span>
          </div>
          <div class="slots-reels">
            <div class="slot-reel" id="reel-0"><img class="sprite" src="/sprites/slotsIcon.png" width="40" height="40" alt="?" onerror="this.src='/sprites/placeholder.png'"></div>
            <div class="slot-reel" id="reel-1"><img class="sprite" src="/sprites/slotsIcon.png" width="40" height="40" alt="?" onerror="this.src='/sprites/placeholder.png'"></div>
            <div class="slot-reel" id="reel-2"><img class="sprite" src="/sprites/slotsIcon.png" width="40" height="40" alt="?" onerror="this.src='/sprites/placeholder.png'"></div>
          </div>
          <div class="bet-row">
            <label>Bet:</label>
            <input type="number" class="bet-input" id="slots-bet" value="10" min="1" max="50000" />
            <div class="bet-presets">
              <button class="bet-preset" onclick="sfxClick();setBet('slots',10)">10</button>
              <button class="bet-preset" onclick="sfxClick();setBet('slots',50)">50</button>
              <button class="bet-preset" onclick="sfxClick();setBet('slots',100)">100</button>
            </div>
          </div>
          <button class="game-btn" id="slots-spin-btn" onclick="sfxClick();playSlots()">SPIN</button>
          <div class="game-result" id="slots-result"></div>
          <div style="font-size:12px;color:var(--text-system);margin-top:8px;text-align:center;">Cherry=2x &middot; Lemon=3x &middot; Orange=4x &middot; Star=6x &middot; Diamond=8x &middot; Seven=20x</div>
        </div>
        <!-- DICE -->
        <div id="game-dice" class="game-panel">
          <div class="game-balance" id="dice-balance">
            <img class="sprite" src="/sprites/coinIcon.png" width="18" height="18" alt="coin" onerror="this.src='/sprites/placeholder.png'">
            Balance: <span id="dice-balance-amt">0</span>
          </div>
          <div class="dice-display">
            <div class="dice-side"><label>You</label><div class="dice-value" id="dice-player">?</div></div>
            <div class="dice-vs">VS</div>
            <div class="dice-side"><label>House</label><div class="dice-value" id="dice-house">?</div></div>
          </div>
          <div class="bet-row">
            <label>Bet:</label>
            <input type="number" class="bet-input" id="dice-bet" value="10" min="1" max="50000" />
            <div class="bet-presets">
              <button class="bet-preset" onclick="sfxClick();setBet('dice',10)">10</button>
              <button class="bet-preset" onclick="sfxClick();setBet('dice',50)">50</button>
              <button class="bet-preset" onclick="sfxClick();setBet('dice',100)">100</button>
            </div>
          </div>
          <button class="game-btn" id="dice-roll-btn" onclick="sfxClick();playDice()">ROLL DICE</button>
          <div class="game-result" id="dice-result"></div>
          <div style="font-size:12px;color:var(--text-system);margin-top:8px;text-align:center;">Roll 2 dice vs the house. Higher total wins 1.9x &middot; Tie returns bet</div>
        </div>
        <!-- ROULETTE -->
        <div id="game-roulette" class="game-panel">
          <div class="game-balance" id="roulette-balance">
            <img class="sprite" src="/sprites/coinIcon.png" width="18" height="18" alt="coin" onerror="this.src='/sprites/placeholder.png'">
            Balance: <span id="roulette-balance-amt">0</span>
          </div>
          <div style="display:flex;justify-content:center;margin:16px 0;">
            <div style="text-align:center;">
              <label style="font-size:12px;color:var(--text-system);">Spin</label>
              <div style="font-size:28px;margin-top:4px;" id="roulette-spin">
                <img class="sprite" src="/sprites/rouletteIcon.png" width="40" height="40" alt="Roulette" onerror="this.src='/sprites/placeholder.png'">
              </div>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:12px 0;">
            <button class="game-btn" id="roulette-red-btn" onclick="sfxClick();playRoulette('red')" style="background:#cc0000;">RED</button>
            <button class="game-btn" id="roulette-black-btn" onclick="sfxClick();playRoulette('black')" style="background:#222;color:#fff;">BLACK</button>
            <button class="game-btn" onclick="sfxClick();playRoulette('even')" style="background:#0056b3;">2,4,6... EVEN</button>
            <button class="game-btn" onclick="sfxClick();playRoulette('odd')" style="background:#0056b3;">1,3,5... ODD</button>
          </div>
          <div class="bet-row">
            <label>Bet:</label>
            <input type="number" class="bet-input" id="roulette-bet" value="10" min="1" max="50000" />
            <div class="bet-presets">
              <button class="bet-preset" onclick="sfxClick();setBet('roulette',10)">10</button>
              <button class="bet-preset" onclick="sfxClick();setBet('roulette',50)">50</button>
              <button class="bet-preset" onclick="sfxClick();setBet('roulette',100)">100</button>
            </div>
          </div>
          <div id="roulette-selected-info"></div>
          <div style="font-size:12px;color:var(--text-system);margin:8px 0;">Or pick a specific number (50x payout):</div>
          <div id="roulette-number-grid"></div>
          <div class="game-result" id="roulette-result"></div>
          <div style="font-size:12px;color:var(--text-system);margin-top:8px;text-align:center;">Red/Black/Even/Odd = 1.8x &middot; Number = 50x. Spin 0 is green (house win)</div>
        </div>
        <!-- LEADERBOARD -->
        <div id="game-leaderboard" class="game-panel">
          <div class="lb-header"><span>Rank</span><span>Player</span><span>Coins</span></div>
          <div id="leaderboard-rows">
            <div style="text-align:center;color:var(--text-system);padding:20px;">Loading...</div>
          </div>
          <button class="game-btn" style="margin-top:12px;" onclick="sfxClick();loadLeaderboard()">Refresh</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ANNOUNCEMENT -->
<div id="announcement-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span style="display:flex;align-items:center;gap:6px;">
        <img class="sprite" src="/sprites/warningIcon.png" width="16" height="16" alt="!" onerror="this.src='/sprites/placeholder.png'"> Server Announcement
      </span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('announcement-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closeAnnouncement()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body">
      <div id="announcement-content" style="color:var(--text-main);margin-bottom:16px;line-height:1.5;"></div>
      <button class="game-btn" onclick="sfxClick();closeAnnouncement()">Close</button>
    </div>
  </div>
</div>

<!-- PATCH NOTES -->
<div id="patchnotes-modal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-titlebar">
      <span>Patch Notes</span>
      <div class="win-titlebar-btns">
        <button class="modal-minimize" onclick="sfxClick();winMinimize('patchnotes-modal')">_</button>
        <button class="modal-close" onclick="sfxClick();closePatchNotes()">&#x2715;</button>
      </div>
    </div>
    <div class="modal-body" style="max-height:60vh;overflow-y:auto;">
      <div id="patchnotes-content" style="color:var(--text-main);line-height:1.6;font-size:14px;">
        <div style="margin-bottom:16px;">
          <div style="font-weight:bold;margin-bottom:8px;">Latest Updates</div>
          <ul style="margin:0;padding-left:20px;">
            <li>Coins moved out of titlebar — find your balance quietly in Settings</li>
            <li>Settings simplified to three tabs: Look, You, Account</li>
            <li>Idle users now shown with zzz animation instead of timer</li>
            <li>Ambient room presence — the room breathes when it's quiet</li>
            <li>Welcome back message when you return after a while</li>
            <li>New Forest theme &mdash; deep greens and earthy browns</li>
            <li>All windows are draggable and minimisable</li>
          </ul>
        </div>
      </div>
      <button class="game-btn" onclick="sfxClick();closePatchNotes()" style="margin-top:16px;">Close</button>
    </div>
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/app.js"></script>
</body>
</html>